<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<title>Відправка координат</title>
</head>
<body>

<h2>Надіслати мої GPS координати</h2>
<button id="sendBtn">Надіслати</button>

<script>
document.getElementById("sendBtn").addEventListener("click", () => {
  if (!navigator.geolocation) {
    alert("Геолокація не підтримується браузером.");
    return;
  }

  navigator.geolocation.getCurrentPosition(
    position => {
      const lat = position.coords.latitude;
      const lon = position.coords.longitude;

      const payload = {
        latitude: lat,
        longitude: lon,
        accuracy: position.coords.accuracy,
        timestamp: new Date().toISOString()
      };

      fetch("https://app.hooklistener.com/w/my-first-endpoint-ph72/", {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify(payload)
      })
      .then(response => {
        if (response.ok) {
          alert("Координати успішно надіслані!");
        } else {
          alert("Помилка при надсиланні.");
        }
      })
      .catch(err => {
        alert("Fetch error: " + err);
      });

    },
    error => {
      alert("Не вдалося отримати координати: " + error.message);
    }
  );

});
</script>

</body>
</html>
