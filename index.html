<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<title>Розкажи мені де ти</title>
</head>
<body>

<button onclick="send()">Розкажи мені де ти</button>

<script>
function send() {
  navigator.geolocation.getCurrentPosition(
    (pos) => {
      const lat = pos.coords.latitude;
      const lon = pos.coords.longitude;

      const payload = {
        lat: lat,
        lon: lon,
        google_map: "https://www.google.com/maps?q=" + lat + "," + lon,
        osm_map: "https://www.openstreetmap.org/?mlat=" + lat + "&mlon=" + lon,
        apple_map: "https://maps.apple.com/?ll=" + lat + "," + lon,
        ua: navigator.userAgent,
        time: new Date().toISOString()
      };

      fetch("https://app.hooklistener.com/w/my-first-endpoint-ph72/", {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify(payload)
      })
      .then(() => alert("sent"))
      .catch(e => alert("fetch error: " + e));
    },
    (err) => alert("geo error: " + err.message)
  );
}
</script>

</body>
</html>
